<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì‚¬í† ì‹œì˜ì§ê°</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="top">
    <div class="container">
      <h1 class="app-title">ì‚¬í† ì‹œì˜ì§ê°</h1>
      <p class="subtitle">AI ê¸°ë°˜ ë§¤ìˆ˜Â·ë§¤ë„ íƒ€ì  ë° ì˜ˆì—´Â·ê¸‰ë“±Â·ê¸‰ë½ íƒì§€ ì‹œìŠ¤í…œ</p>
      <small id="connStatus" class="muted">ğŸ”Œ ì—°ê²° ì¤€ë¹„ì¤‘...</small>
    </div>
  </header>

  <!-- ê²€ìƒ‰ -->
  <section id="search-section">
    <input id="searchInput" placeholder="ì½”ì¸ëª…/ì‹¬ë³¼ ì…ë ¥ (ì˜ˆ: ë¹„íŠ¸, BTC)" />
    <button id="searchBtn" class="primary">ê²€ìƒ‰</button>
  </section>

  <!-- ê²€ìƒ‰ ê²°ê³¼ í‘œ (ê²€ìƒ‰ì°½ ë°”ë¡œ ì•„ë˜) -->
  <div id="searchResult" style="margin-top:20px;">
    <table class="coin-table">
      <thead>
        <tr>
          <th>ì½”ì¸ëª…</th>
          <th>í˜„ì¬ê°€</th>
          <th>ë³€ë™ë¥ </th>
          <th>ìƒíƒœ</th>
          <th>ìœ„í—˜ë„</th>
          <th>ì˜ˆì—´ì‹œê°„</th>
          <th>ì˜ˆì—´ì¢…ë¥˜ì‹œê°„</th>
          <th>ì©”ì–´ê²°ë¡ </th>
        </tr>
      </thead>
      <tbody id="resultBody">
        <tr><td colspan="8" style="text-align:center;color:var(--muted);">ê²€ìƒ‰ ê²°ê³¼ ì—†ìŒ</td></tr>
      </tbody>
    </table>
  </div>

  <!-- ì‹¤ì‹œê°„ ì„¹ì…˜ -->
  <section id="signal-section" class="container">
    <h2>ğŸš€ ê¸‰ë“± í•«ì„¸íŠ¸</h2>
    <ul id="list-soaring" class="list"></ul>

    <h2>ğŸ”¥ ì˜ˆì—´ ì½”ì¸</h2>
    <ul id="list-warning" class="list"></ul>

    <h2>âš¡ ê°€ì—´ ì½”ì¸</h2>
    <ul id="list-heating" class="list"></ul>
  </section>

  <!-- ì‹¤ì‹œê°„ ê°ì§€ ì—°ê²° -->
  <script type="module">
    import { startRealtimeDetector } from "./js/realtime_detector.js";

    const $ = (id) => document.getElementById(id);
    const $conn = $("connStatus");

    const paint = (el, arr) => {
      if (!el) return;
      const list = Array.isArray(arr) ? arr : [];
      el.innerHTML = list.length
        ? list.map(c => `<li>${c}</li>`).join("")
        : `<li class="muted">ìŠ¤ìº” ëŒ€ê¸°...</li>`;
    };

    startRealtimeDetector(({ soaring = [], warning = [], heating = [], statusText }) => {
      paint($("list-soaring"),  soaring);
      paint($("list-warning"),  warning);
      paint($("list-heating"),  heating);
      if ($conn && statusText) $conn.textContent = statusText;
    });
  </script>

  <!-- ê²€ìƒ‰ ëª¨ë“ˆ -->
  <script type="module" src="./js/fullset_search.js"></script>
</body>
</html>
